(()=>{"use strict";var e={658:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(81),r=n.n(o),i=n(645),a=n.n(i)()(r());a.push([e.id,"",""]);const s=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=o.base?c[0]+o.base:c[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var p=n(u),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var h=r(g,o);o.byIndex=s,t.splice(s,0,{identifier:u,updater:h,references:1})}a.push(u)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=o(e,r),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=c}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),o=n(795),r=n.n(o),i=n(569),a=n.n(i),s=n(565),c=n.n(s),l=n(216),d=n.n(l),u=n(589),p=n.n(u),g=n(658),h={};h.styleTagTransform=p(),h.setAttributes=c(),h.insert=a().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=d(),t()(g.Z,h),g.Z&&g.Z.locals&&g.Z.locals;const f=class{constructor(e,t){this.container=document.createElement(e),this.container.className=t}render(){return this.container}};var v,m,y,b;(b=v||(v={})).add="Add to cart",b.remove="Remove from cart",function(e){e.counter="counter",e.sumTotal="sumTotal",e.products="cart_products",e.dataObj="data_obj"}(m||(m={})),function(e){e[e.add=0]="add",e[e.remove=1]="remove"}(y||(y={}));var _=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function w(){const e=localStorage.getItem(m.dataObj);return e?JSON.parse(e):[{id:0,count:0,price:0}]}function $(e){const t=w().filter((t=>t.id&&t.id.toString()===e));return 0!=t.length?t[0].count:1}function x(e,t,n,o=1){return _(this,void 0,void 0,(function*(){const r=yield fetch("./json-data/goods.json"),i=(yield r.json()).products.filter((e=>e.id.toString()===t)),a=i[0].id,s=i[0].price,c={id:a,count:$(t),price:s},l=Number(k()),d=Number(C()),u=w(),p=u.filter((e=>e.id&&e.id.toString()===t));p[0]?"btn-plus"===(null==n?void 0:n.className)?p[0].count+=1:"btn-minus"===(null==n?void 0:n.className)?p[0].count-=1:"goods-buy-button"!==(null==n?void 0:n.className)&&u.splice(u.indexOf(p[0]),1):u.push(c),localStorage.setItem(m.dataObj,JSON.stringify(u)),"button card-item__add-to-cart"===(null==n?void 0:n.className)||"button card-item__add-to-cart button-added"===(null==n?void 0:n.className)||"btn-add goods-buy-button"===(null==n?void 0:n.className)||null==n||n.className,void 0!==n&&(e==y.add&&(localStorage.setItem(m.counter,`${l+o}`),localStorage.setItem(m.sumTotal,`${d+s}`)),e==y.remove&&"goods-buy-button"!==(null==n?void 0:n.className)&&(localStorage.setItem(m.counter,""+(l-p[0].count*o)),localStorage.setItem(m.sumTotal,""+(d-p[0].count*s)))),"btn-plus"===(null==n?void 0:n.className)&&(localStorage.setItem(m.counter,`${l+o}`),localStorage.setItem(m.sumTotal,`${d+s}`)),"btn-minus"===(null==n?void 0:n.className)&&(localStorage.setItem(m.counter,""+(l-o)),localStorage.setItem(m.sumTotal,""+(d-s)))}))}function S(){const e=localStorage.getItem(m.products);return e?JSON.parse(e):[]}function k(){return localStorage.getItem(m.counter)||"0"}function C(){return localStorage.getItem(m.sumTotal)||"0"}function L(e,t){return _(this,void 0,void 0,(function*(){const n=S();!function(e,t){const n=S();n.includes(e)?"goods-buy-button"!==(null==t?void 0:t.className)&&"btn-plus"!==(null==t?void 0:t.className)&&"btn-minus"!==(null==t?void 0:t.className)&&n.splice(n.indexOf(e),1):n.push(e),localStorage.setItem(m.products,JSON.stringify(n))}(e,t),n.includes(e)?yield x(y.remove,e,t):yield x(y.add,e,t);const o=document.querySelector(".header-container__amount"),r=document.querySelector(".header-container__cost"),i=document.querySelector(".cart__general-number"),a=document.querySelector(".cart__general-price-new");o&&(o.textContent=k(),i&&(i.innerHTML=`<span>Total products:</span> ${k()}`)),r&&(r.textContent=`${C()}`,a&&(a.innerHTML=`<span>Total payable:</span> ${C()}$`))}))}function T(e){return S().includes(e)}const M=function(e,t,n,o){let r=null;try{r=document.createElement(e)}catch(e){throw new Error("Unable to create HTMLElement! You should give a proper HTML tag name")}return t&&r.classList.add(...t.split(" ")),o&&(r.textContent=o),n&&n.appendChild(r),r},E=class extends f{constructor(e,t){super(e,t)}renderHeader(){M("div","wrapper header__wrapper",this.container).innerHTML='\n      <div class="header-container">\n      <div class="logo">\n          <h1 class="logo__text">Online-store</h1>\n          <a href="#main-page" class="logo__link"\n              ><img src="./assets/images/logo.png" alt="red wings" class="logo__image"\n          /></a>\n      </div>\n      <div class="header-container__cost-container">\n          <span class="header-container__cost">0</span>\n          <span> $</span>\n      </div>\n\n      <div class="header-container__cart">\n          <a href="#cart" class="logo__cart-link"></a>\n          <div class="header-container__amount">0</div>\n      </div>\n  </div>\n      ',this.container.querySelector(".logo__link");const e=this.container.querySelector(".header-container__amount"),t=this.container.querySelector(".header-container__cost");e.textContent=k(),t.textContent=C()}render(){return this.renderHeader(),this.container}},N=class{constructor(e){this.id=e,this.container=document.createElement("main"),this.container.className="main"}render(){return this.container}};function q(){const e=document.querySelector("body"),t=document.querySelector("#popupItemTemp").content.cloneNode(!0),n=t.querySelector(".popup-content"),o=t.querySelector(".popup-form"),r=o.querySelectorAll("input"),i=o.querySelector(".number"),a=o.querySelector(".number img"),s=o.querySelector(".date-data input"),c=o.querySelector(".cvv-data input"),l=document.createElement("div");l.classList.add("popup"),l.innerHTML='<div class="popup_back"></div>';const d=document.createElement("div");function u(){l.remove(),e.classList.remove("scroll-none")}d.innerHTML='<div class="popup_close"></div>',n.append(d),l.prepend(t),e.prepend(l),e.classList.add("scroll-none");const p=document.querySelector(".popup_back"),g=document.querySelector(".popup_close");function h(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}p.addEventListener("click",u),g.addEventListener("click",u),window.addEventListener("hashchange",u),o.addEventListener("submit",(t=>{!function(t){t.preventDefault();const o=document.querySelector("form");r.forEach((e=>{const t=e.nextElementSibling;""===t.textContent&&(""===e.value?t.textContent="This field is empty":t.textContent="")})),Array.from(r).every((e=>""!==e.value&&""===e.nextElementSibling.textContent))&&(o.reset(),n.textContent="Order is processed. You will be taken to the main page in 3 seconds.",setTimeout((()=>{const e=window.location.href;console.log(e),window.location.href=e.replace("#cart","#main-page")}),3e3),e.classList.remove("scroll-none"))}(t)})),r.forEach((e=>{e.addEventListener("blur",(()=>{!function(e){const t=e.nextElementSibling;"username"===e.name&&(/^[а-яА-ЯёЁa-zA-Z]{3,}(\s+[а-яА-ЯёЁa-zA-Z]{3,}){1,}$/i.test(e.value.trim())||""===e.value?t.textContent="":t.textContent="At least 2 words of at least 3 letters each"),"phone"===e.name&&(/^[+][0-9]{9,}$/.test(e.value)||""===e.value?t.textContent="":t.textContent="Start with '+', no shorter than 9 characters"),"address"===e.name&&(/^[а-яА-ЯёЁa-zA-Z]{5,}(\s+[а-яА-ЯёЁa-zA-Z]{5,}){2,}$/i.test(e.value.trim())||""===e.value?t.textContent="":t.textContent="At least 3 words of at least 5 letters each"),"email"===e.name&&(/^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,4}$/.test(e.value.trim())||""===e.value?t.textContent="":t.textContent="Incorrect email"),"credit-card"===e.name&&(16!==e.value.replace(/\D/g,"").length&&""!==e.value?t.textContent="Error":t.textContent=""),"date"===e.name&&((4!==e.value.replace(/\D/g,"").length||+e.value.slice(0,2)>12)&&""!==e.value?t.textContent="Error":t.textContent=""),"cvv"===e.name&&(3!==e.value.replace(/\D/g,"").length&&""!==e.value?t.textContent="Error":t.textContent="")}(e)}))})),i.addEventListener("keydown",(e=>{h(e)})),s.addEventListener("keydown",(e=>{h(e)})),c.addEventListener("keydown",(e=>{h(e)})),i.addEventListener("input",(e=>{!function(e){const t=e.target;"3"==t.value[0]?a.src="./assets/images/american.png":"4"==t.value[0]?a.src="./assets/images/visa.png":"5"==t.value[0]?a.src="./assets/images/mastercard.png":a.src="./assets/images/card.png";const n=t.value.replace(/\D/g,"");t.value="";for(let e=0;e<n.length;e++)t.value+=(e%4==0&&0!=e?" ":"")+n[e];t.value.length>19&&(t.value=t.value.slice(0,19))}(e)})),s.addEventListener("input",(e=>{!function(e){const t=e.target,n=t.value.replace(/\D/g,"");t.value="";for(let e=0;e<n.length;e++)t.value+=(e%2==0&&0!=e?"/":"")+n[e];t.value.length>5&&(t.value=t.value.slice(0,5))}(e)})),c.addEventListener("input",(e=>{!function(e){const t=e.target;t.value.length>3&&(t.value=t.value.slice(0,3))}(e)}))}const H=["apple","samsung","oppo","huawei","microsoft-surface","infinix","hp-pavilion","impression-of-acqua-di-gio","royal-mirage","fog-scent-xpressio","al-munakh","lord-rehab","loreal-paris","hemani-tea","dermive","rorec-white-rice","fair-clear","saaf-khaas","bake-parlor-big","baking-food-items","fauji","dry-rose","boho-decor","flying-wooden","led-lights","luxury-palace","golden"],j={css:10,html:10};class P extends N{constructor(e){super(e)}createTotalCart(){const e=document.createElement("div");e.classList.add("cart__wrapper"),this.container.append(e),e.innerHTML='\n        <div class="products__container">\n        </div>\n        <div class="cart__general">\n            <div class="cart__general-price cart__general-number"></div>\n            <div class="cart__general-price price"></div>\n            <div class="cart__general-discounts">\n            </div>\n            <div class="cart__general-promo">\n                <input type="search" placeholder="Promo ex: \'js\', \'css\'" />\n            </div>\n            <div class="cart__general-used-promos">\n            </div>\n            <button type = \'submit\' class="btn btn_confirm">BUY</button>\n        </div>';const t=this.container.querySelector(".cart__general-number"),n=this.container.querySelector(".price"),o=this.container.querySelector(".btn_confirm"),r=this.container.querySelector(".cart__general-promo input");t.innerHTML=`<span>Total products:</span> ${k()}`,n.innerHTML=`<span>Total payable:</span> ${C()}$`,o.addEventListener("click",q),r.addEventListener("input",this.createPromo)}createPromo(e){const t=e.target,n=t.closest(".cart__general"),o=n.querySelector(".cart__general-used-promos");for(const e in j)if(t.value===e){const n=j[e];console.log(t.value),console.log(e),console.log(n);const i=M("div","used-promo",o,`"${e}"-cod (${n}%)     `);M("span","",i,"add").addEventListener("click",r)}function r(e){e.target.remove();const t=n.querySelector(".price"),o=t.textContent;console.log(o);const r=n.querySelector(".cart__general-discounts"),i=n.querySelector(".used-promo").textContent,a=M("div","cart__general-disc",r,`${i} added `),s=(M("span","",a,"del"),document.createElement("div"));s.className="cart__general-price cart__general-price-new",s.innerHTML=`<span>Total payable:</span> ${.9*Number(C())}$`,t.classList.add("cart__general-price-old"),t.after(s)}}createProductCard(e,t){const n=this.container.querySelector(".products__container"),o=M("div","goods-detail",n);o.id=e.id.toString(),o.innerHTML=`\n        <div class="goods-data">\n            <div class="goods-number">${t+1}</div>\n            <div class="goods-main-photo">\n                <img alt="photo" src="${e.thumbnail}" />\n            </div>\n            <div class="goods-about">\n                <div class="about-blocks">\n                    <div class="about-block">\n                        <p><span>Category: </span>${e.category}</p>\n                        <p><span>Brand: </span>${e.brand}</p>\n                    </div>\n                    <div class="about-block">\n                        <p><span>Discount: </span>${e.discountPercentage}%</p>\n                        <p><span>Rating: </span>${e.rating}</p>\n                    </div>\n                </div>\n                <p class="description">\n                ${e.description}\n                </p>\n            </div>\n            <div class="goods-buy">\n                <div class="goods-buy-btn">\n                    <div class="btn-control">\n                        <button class="btn-minus">-</button>\n                        <span class="btn-control-num">${$(e.id.toString())}</span>\n                        <button class="btn-plus">+</button>\n                    </div>\n                    <div class="about-block">\n                        <p><span>Stock: </span><span class="stock">${e.stock}</span></p>\n                        <p><span>Price: </span>${e.price}$</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `}renderAllGods(){return e=this,t=void 0,o=function*(){const e=this.container.querySelector(".products__container");try{const t=yield fetch("./json-data/goods.json"),n=(yield t.json()).products,o=S();for(let e=0;e<o.length;e+=1)this.createProductCard(n.filter((t=>t.id.toString()===o[e]))[0],e);return e.addEventListener("click",this.cartListener),n}catch(e){console.log(e)}},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}));var e,t,n,o}cartListener(e){const t=e.target,n=t.closest(".goods-detail"),o=t.closest(".main"),r=(t.closest(".products__container"),n.querySelector(".btn-control-num")),i=n.querySelector(".stock"),a=n.querySelector(".btn-plus");if(console.log(i.textContent),"BUTTON"===t.tagName){if("-"===t.textContent&&(a.removeAttribute("disabled"),r.textContent=""+(Number(r.textContent)-1),L(n.id,t),"0"===r.textContent)){L(n.id),o.remove();const e=new P("cart").render();e.id="current-page",document.body.append(e),"1"===k()&&(document.querySelector(".main").innerHTML='<div class="cart-empty">Cart is empty</div>')}"+"===t.textContent&&(r.textContent=`${Number(r.textContent)+1}`,L(n.id,t),r.textContent===i.textContent&&(console.log("1312313123"),console.log(e),console.log(t),t.setAttribute("disabled","true")))}else{if(!n)return;window.location.hash=`product-details/${n.id}`}}render(){return console.log(this),"0"===k()?M("div","cart-empty",this.container,"Cart is empty"):(this.createTotalCart(),this.renderAllGods()),this.container}}const A=P;class I extends N{constructor(e){super(e)}renderProductDetails(){return e=this,t=void 0,o=function*(){try{const e=yield fetch("./json-data/goods.json"),t=yield e.json(),n=window.location.hash.slice(1).split("/")[1],o=t.products.filter((e=>e.id.toString()===n))[0],r=document.createElement("div");r.classList.add("product__wrapper");const i=T(`${n}`),a=i?v.remove:v.add;r.innerHTML=`     <div class="product__container">\n            <div class="product__nav">\n                <a href="#main-page">ONLINE STORE</a> &gt;&gt;&gt; <a>${o.category.toUpperCase()}</a> &gt;&gt;&gt;\n                <a>${o.brand.toUpperCase()}</a> &gt;&gt;&gt;\n                <a>${o.title.toUpperCase()}</a>\n            </div>\n            <div class="goods-detail">\n                <div class="goods-data">\n                    <div class="goods-photos">\n                        <div class="goods-smallphotos">\n                            <img alt="photo" src="${o.thumbnail}" />\n                            <img alt="photo" src="${o.background1}" />\n                            <img alt="photo" src="${o.background2}" />\n                        </div>\n                        <div class="goods-main-photo">\n                            <img alt="main photo" src="${o.thumbnail}" />\n                        </div>\n                    </div>\n                    <div class="goods-about">\n                        <p> <span>${o.description}</p>\n                        <p><span>Category: </span>${o.category}</p>\n                        <p><span>Brand: </span>${o.brand}</p>\n                        <p><span>Discount: </span>${o.discountPercentage}%</p>\n                        <p><span>Rating: </span>${o.rating}</p>\n                        <p><span>Stock: </span>${o.stock}</p>\n                        <p><span>Price: </span>${o.price}$</p>\n                    </div>\n                    <div class="goods-buy">\n                        <div class="goods-buy-btns">\n                            <button class="btn-add goods-buy-button${i?" button-added":""}" >${a}</button>\n                            <button id = 'buttonBuy' class="goods-buy-button">BUY NOW</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`,this.container.append(r);const s=this.container.querySelector(".goods-smallphotos"),c=this.container.querySelector(".goods-main-photo img");s.addEventListener("click",(e=>{e.target.closest(".goods-smallphotos")&&(c.src=e.target.src)}));const l=this.container.querySelector(".goods-buy-button");null==l||l.addEventListener("click",(e=>{const t=e.target;S().includes(n)?(l.classList.remove("button-added"),l.innerHTML=v.add):(l.classList.add("button-added"),l.innerHTML=v.remove),L(n,t)}));const d=this.container.querySelector("#buttonBuy");return null==d||d.addEventListener("click",(e=>{const t=e.target;L(n,t),window.location.hash="cart",setTimeout(q,0)})),r}catch(e){console.log(e)}},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}));var e,t,n,o}render(){return this.renderProductDetails(),this.container}}I.TextObject={MainTitle:"product-details"};const O=I;var D=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function B(){return D(this,void 0,void 0,(function*(){try{const e=yield fetch("./json-data/goods.json"),t=(yield e.json()).products,n=new Set;for(let e=0;e<t.length;e+=1)n.add(t[e].brand);return Array.from(n)}catch(e){console.log(e)}}))}function F(){return D(this,void 0,void 0,(function*(){try{const e=yield fetch("./json-data/goods.json"),t=(yield e.json()).products,n=new Set;for(let e=0;e<t.length;e+=1)n.add(t[e].category);return Array.from(n)}catch(e){console.log(e)}}))}const R=function(e,t,n,o,r,i,a){const s=document.createElement("div");s.classList.add(t);const c=document.createElement("input");c&&(c.type=n,c.classList.add(o),c.id=r,c.addEventListener("change",i)),s.append(c);const l=document.createElement("label");return l&&(l.setAttribute("for",`${r}`),l.textContent=a),s.append(l),e.append(s),s},U=function(e,t,n){t?e.splice(n,1,t):e.splice(n,1);const o=e.splice(1).join("?");if(o.length>0){const e=`main-page?${o}`;location.hash=e}else location.hash="main-page"};function G(e,t){let n=window.location.href;if(n.includes("?")){if(n.includes(t)){const o=n.split("?");let r=o.find((e=>e.includes(t)));if(r){const n=o.indexOf(r);r&&e.length>0&&("price"===t||"stock"===t?(e=e.sort(((e,t)=>Number(e)-Number(t))),r=`${t}=${e[0]},${e[1]}`,U(o,r,n)):(r=`${r},${e[e.length-1]}`,U(o,r,n)))}}else if(e.length>0)if("price"===t||"stock"===t){const o=n.split("#")[1];e=e.sort(((e,t)=>Number(e)-Number(t))),location.hash=`${o}?${t}=${e[0]},${e[1]}`}else e.forEach((e=>{const o=n.split("#")[1];location.hash=`${o}?${t}=${e}`}))}else e.length>0&&("price"===t||"stock"===t?(e=e.sort(((e,t)=>Number(e)-Number(t))),n=`main-page?${t}=${e[0]},${e[1]}`,location.hash=n):e.forEach((e=>{n=`main-page?${t}=${e}`,location.hash=n})))}function Z(e,t){const n=window.location.href.split("?"),o=n.find((e=>e.includes(t)));if(o){const r=n.indexOf(o);if(o&&e.length>0){const o=e.join(",");U(n,`${t}=${o}`,r)}else o&&0===e.length&&U(n,"",r)}}const z=[];function J(){const e=this.id;if(this.checked)z.push(e),G(z,"category"),he.cardsContainer.innerHTML="";else{const t=z.indexOf(`${e}`);z.splice(t,1),Z(z,"category"),he.cardsContainer.innerHTML="",0===z.length&&0===W.length&&(he.sectionTools.innerHTML="",he.regulationContainer.innerHTML="")}}const Y=[],W=[];function K(){const e=this.id,t=document.querySelector(`label[for=${e}]`);if(this.checked){Y.push(e),G(Y,"brand");const n=t.textContent||"";W.push(n),he.cardsContainer.innerHTML=""}else{const e=W.indexOf(`${null==t?void 0:t.textContent}`);Y.splice(e,1),Z(Y,"brand"),W.splice(e,1),0===W.length&&0===z.length&&(he.sectionTools.innerHTML="",he.regulationContainer.innerHTML="")}}function Q(e){const t=document.createElement("div");t.classList.add("card-item"),t.id=e.id.toString(),M("div","card-item__image",t).style.background=`url('${e.thumbnail}') center center / cover`,M("p","card-item__title",t,e.title),M("p","card-item__price",t,`Price: ${e.price}`),M("p","card-item__rating",t,`Rating: ${e.rating}`),M("p","card-item__stock",t,`Stock: ${e.stock}`);const n=T(`${e.id}`),o=n?v.remove:v.add;return M("button","button card-item__add-to-cart"+(n?" button-added":""),t,`${o}`),he.cardsContainer.append(t),t}const X=function(e="",t,n){const o=document.createElement("option");return o.value=e,o.textContent=t,n.append(o),o},V=function(e,t,n,o,r,i,a,s,c){let l=null;try{l=document.createElement(e)}catch(e){throw new Error("Unable to create input range")}return l.setAttribute("type",t),n&&l.classList.add(...n.split(" ")),l.setAttribute("value",o),l.setAttribute("max",r),l.setAttribute("min",i),l.setAttribute("step",a),l.addEventListener("change",s),c&&c.appendChild(l),l},ee=["0","100"];function te(){this.classList.contains("input-price-left")?(ee[0]=this.value,G(ee,"price")):(ee[1]=this.value,G(ee,"price"))}const ne=["0","100"];function oe(){this.classList.contains("input-stock-left")?(ne[0]=this.value,G(ne,"stock")):(ne[1]=this.value,G(ne,"stock"))}var re=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function ie(){const e=M("select","tools__sort",he.sectionTools);e.id="sort-goods",X("","Sort goods...",e).setAttribute("selected","selected"),X("priceA","By price: low to high",e),X("priceD","By price: high to low",e),X("ratingA","By rating: low to high",e),X("ratingD","By rating: high to low",e)}function ae(e){const t=100*Number(e[1])/100,n=Math.trunc(t).toString(),o=Math.trunc(100-t).toString(),r=100*Number(e[0])/100,i=Math.trunc(r).toString();M("div","filter-price__title",he.sectionTools,"Filter goods by price");const a=M("div","filter-price",he.sectionTools),s=M("div","filter-price__visible-parts-container",a),c=M("div","filter-price__inverse-left",s);c.style.width=`${i}%`;const l=M("div","filter-price__inverse-right",s);l.style.width=`${o}%`;const d=M("div","filter-price__range",s);d.style.left=`${i}%`,d.style.right=`${o}%`;const u=M("span","filter-price__thumb-left",s);u.style.left=`${i}%`;const p=M("span","filter-price__thumb-right",s);p.style.left=`${n}%`;const g=M("div","filter-price__sign-left",s);g.style.left=`${i}%`;const h=M("span","filter-price__left-thumb-screen",g,`${e[0]}`),f=M("div","filter-price__sign-right",s);f.style.left=`${n}%`;const v=M("span","filter-price__right-thumb-screen",f,`${e[1]}`),m=V("input","range","input-price-left",`${e[0]}`,"100","0","1",te,a),y=V("input","range","input-price-right",`${e[1]}`,"100","0","1",te,a);m.addEventListener("input",(()=>{const e=Number(y.value)-1;let t=Number(m.value);t=Math.min(t,e);const n=t/parseInt(m.max,10)*100;c.style.width=`${n}%`,d.style.left=`${n}%`,u.style.left=`${n}%`,g.style.left=`${n}%`,h.innerHTML=m.value})),y.addEventListener("input",(()=>{let e=Number(y.value);const t=Number(m.value);e=Math.max(e,t- -1);const n=e/parseInt(y.max,10)*100;l.style.width=100-n+"%",d.style.right=100-n+"%",p.style.left=`${n}%`,f.style.left=`${n}%`,v.innerHTML=y.value}))}function se(e){const t=100*Number(e[1])/100,n=Math.trunc(t).toString(),o=Math.trunc(100-t).toString(),r=100*Number(e[0])/100,i=Math.trunc(r).toString();M("div","filter-stock__title",he.sectionTools,"Filter goods by stock");const a=M("div","filter-stock",he.sectionTools),s=M("div","filter-stock__visible-parts-container",a),c=M("div","filter-stock__inverse-left",s);c.style.width=`${i}%`;const l=M("div","filter-stock__inverse-right",s);l.style.width=`${o}%`;const d=M("div","filter-stock__range",s);d.style.left=`${i}%`,d.style.right=`${o}%`;const u=M("span","filter-stock__thumb-left",s);u.style.left=`${i}%`;const p=M("span","filter-stock__thumb-right",s);p.style.left=`${n}%`;const g=M("div","filter-stock__sign-left",s);g.style.left=`${i}%`;const h=M("span","filter-stock__left-thumb-screen",g,`${e[0]}`),f=M("div","filter-stock__sign-right",s);f.style.left=`${n}%`;const v=M("span","filter-stock__right-thumb-screen",f,`${e[1]}`),m=V("input","range","input-stock-left",`${e[0]}`,"100","0","1",oe,a),y=V("input","range","input-stock-right",`${e[1]}`,"100","0","1",oe,a);m.addEventListener("input",(()=>{const e=Number(y.value)-1;let t=Number(m.value);t=Math.min(t,e);const n=t/parseInt(m.max,10)*100;c.style.width=`${n}%`,d.style.left=`${n}%`,u.style.left=`${n}%`,g.style.left=`${n}%`,h.innerHTML=m.value})),y.addEventListener("input",(()=>{let e=Number(y.value);const t=Number(m.value);e=Math.max(e,t- -1);const n=e/parseInt(y.max,10)*100;l.style.width=100-n+"%",d.style.right=100-n+"%",p.style.left=`${n}%`,f.style.left=`${n}%`,v.innerHTML=y.value}))}const ce={samsung:"Samsung",apple:"Apple",oppo:"OPPO",huawei:"Huawei","microsoft-surface":"Microsoft Surface",infinix:"Infinix","hp-pavilion":"HP Pavilion","impression-of-acqua-di-gio":"Impression of Acqua Di Gio","royal-mirage":"Royal Mirage","fog-scent-xpressio":"Fog Scent Xpressio","al-munakh":"Al Munakh","lord-rehab":"Lord Al Rehab","loreal-paris":"L'Oreal Paris","hemani-tea":"Hemani Tea",dermive:"Dermive","rorec-white-rice":"ROREC White Rice","fair-clear":"Fair & Clear","saaf-khaas":"Saaf & Khaas","bake-parlor-big":"Bake Parlor Big","baking-food-items":"Baking Food Items",fauji:"Fauji","dry-rose":"Dry Rose","boho-decor":"Boho Decor","flying-wooden":"Flying Wooden","led-lights":"LED Lights","luxury-palace":"Luxury palace",golden:"Golden",smartphones:"smartphones",laptops:"laptops",groceries:"groceries",fragrances:"fragrances",skincare:"skincare","home-decoration":"home-decoration"};var le=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function de(){he.cardsContainer.innerHTML="",he.cardsContainer.innerHTML='<div class="not-found">Goods are not found</div>'}function ue(e){return le(this,void 0,void 0,(function*(){var t;t=e,null!==localStorage.getItem("urlMain")?localStorage.urlMain=t:localStorage.setItem("urlMain",t);const n=e.split("?").slice(1),o={};if(0!==n.length){if(n.forEach((e=>{const t=e.split("="),n=t[0],r=t[1];if("brand"===n||"category"===n){const e=r.split(","),t=[];e.forEach((e=>{const n=ce[e];t.push(n)})),o[n]=t}else if("price"===n||"stock"===n){const e=r.split(",");o[n]=e}else de()})),he.sectionTools.innerHTML="",he.regulationContainer.innerHTML="",he.cardsContainer.innerHTML="",ie(),Object.keys(o).includes("brand")){const e=o.brand,t=M("fieldset","filter-brand",he.sectionTools);M("legend","filter-brand__legend",t,"Filter goods by brand");const n=yield B();if(n)for(let o=0;o<H.length;o++)if(R(t,"filter-brand__line","checkbox","filter-brand__input",H[o],K,n[o]),e&&e.includes(n[o])){const e=document.querySelector(`#${H[o]}`);e&&(e.checked=!0)}}else!function(){re(this,void 0,void 0,(function*(){const e=M("fieldset","filter-brand",he.sectionTools);M("legend","filter-brand__legend",e,"Filter goods by brand");const t=yield B();if(t)for(let n=0;n<H.length;n++)R(e,"filter-brand__line","checkbox","filter-brand__input",H[n],K,t[n])}))}();if(Object.keys(o).includes("category")){const e=o.category,t=M("fieldset","filter-category",he.sectionTools);M("legend","filter-category__legend",t,"Filter goods by category");const n=yield F();if(n)for(let o=0;o<6;o++)if(R(t,"filter-category__line","checkbox","filter-category__input",n[o],J,n[o]),e&&e.includes(`${n[o]}`)){const e=document.querySelector(`#${n[o]}`);e&&(e.checked=!0)}}else!function(){re(this,void 0,void 0,(function*(){const e=M("fieldset","filter-category",he.sectionTools);M("legend","filter-category__legend",e,"Filter goods by category");const t=yield F();if(t)for(let n=0;n<6;n++)R(e,"filter-category__line","checkbox","filter-category__input",t[n],J,t[n])}))}();if(Object.keys(o).includes("price")){const e=o.price;e&&ae([`${e[0]}`,`${e[1]}`])}else ae(["0","100"]);if(Object.keys(o).includes("stock")){const e=o.stock;e&&se([`${e[0]}`,`${e[1]}`])}else se(["0","100"]);const e=yield function(e){return le(this,void 0,void 0,(function*(){try{const t=yield fetch("./json-data/goods.json"),n=(yield t.json()).products,o=[];return n.forEach((t=>{let n=!0;for(const o in e){const r=e[o],i=t[o];"price"===o||"stock"===o?r&&(i<r[0]||i>r[1])&&(n=!1):"brand"!==o&&"category"!==o||r&&!r.includes(i)&&(n=!1)}!0===n&&o.push(t)})),o}catch(e){console.log(e)}}))}(o);if(e&&e.length>0)for(let t=0;t<e.length;t+=1)Q(e[t]);else de();let t=0;e&&e.length>0?t=e.length:e&&0===e.length&&(t=0);const r=M("div","search-container",he.regulationContainer),i=document.createElement("input");i.classList.add("search-field"),i.type="search",i.placeholder="Search goods",r.append(i);const a=M("div","goods-found",he.regulationContainer);M("span","goods-found__amount",a,`${t}`),M("span","goods-found__text",a," goods found");const s=M("div","regulation-container__view-mode",he.regulationContainer);M("div","view view-list",s),M("div","view view-block view_active",s)}}))}var pe=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};class ge extends N{constructor(e,t){super(e),t&&(ge.url=t)}isQueryInUrl(e){return!!e.split("#")[1].includes("?")||(console.log("without ?"),!1)}renderMainPage(){return pe(this,void 0,void 0,(function*(){ge.sectionTools.innerHTML="",ge.regulationContainer.innerHTML="",ge.cardsContainer.innerHTML="",this.renderSectionTools(),this.renderSectionGoods(),yield this.renderAllGods()}))}renderSectionTools(){return pe(this,void 0,void 0,(function*(){ie();const e=M("fieldset","filter-brand",ge.sectionTools);M("legend","filter-brand__legend",e,"Filter goods by brand");const t=yield B();if(t)for(let n=0;n<H.length;n++)R(e,"filter-brand__line","checkbox","filter-brand__input",H[n],K,t[n]);const n=M("fieldset","filter-category",ge.sectionTools);M("legend","filter-category__legend",n,"Filter goods by category");const o=yield F();if(o)for(let e=0;e<6;e++)R(n,"filter-category__line","checkbox","filter-category__input",o[e],J,o[e]);return ae(["0","100"]),se(["0","100"]),ge.sectionTools}))}renderSectionGoods(){const e=M("div","search-container",ge.regulationContainer),t=document.createElement("input");t.classList.add("search-field"),t.type="search",t.placeholder="Search goods",e.append(t);const n=M("div","goods-found",ge.regulationContainer);M("span","goods-found__amount",n,"0"),M("span","goods-found__text",n," goods found");const o=M("div","regulation-container__view-mode",ge.regulationContainer);M("div","view view-list",o),M("div","view view-block view_active",o)}generateCard(e){const t=document.createElement("div");t.classList.add("card-item"),t.id=e.id.toString(),M("div","card-item__image",t).style.background=`url('${e.thumbnail}') center center / cover`,M("p","card-item__title",t,e.title),M("p","card-item__price",t,`Price: ${e.price}`),M("p","card-item__rating",t,`Rating: ${e.rating}`),M("p","card-item__stock",t,`Stock: ${e.stock}`);const n=T(`${e.id}`),o=n?v.remove:v.add;return M("button","button card-item__add-to-cart"+(n?" button-added":""),t,`${o}`),ge.cardsContainer.append(t),t}renderAllGods(){return pe(this,void 0,void 0,(function*(){try{const e=yield fetch("./json-data/goods.json"),t=(yield e.json()).products;for(let e=0;e<t.length;e+=1)this.generateCard(t[e]);return ge.cardsContainer.addEventListener("click",this.cartListener),t}catch(e){console.log(e)}}))}cartListener(e){const t=e.target,n=t.closest(".card-item");if("BUTTON"===t.tagName)S().includes(n.id)?(t.classList.remove("button-added"),t.innerHTML=v.add):(t.classList.add("button-added"),t.innerHTML=v.remove),L(n.id,t);else{if(!n)return;window.location.hash=`product-details/${n.id}`}}render(){if(ge.url&&this.isQueryInUrl(ge.url))ue(ge.url),this.container.append(ge.wrapperMain);else if(!ge.url&&localStorage.getItem("urlMain")){const e=localStorage.getItem("urlMain");e&&(ue(e),this.container.append(ge.wrapperMain))}else this.renderMainPage(),this.container.append(ge.wrapperMain);return this.container}}ge.wrapperMain=M("div","wrapper wrapper__main"),ge.sectionTools=M("section","tools",ge.wrapperMain),ge.sectionGoods=M("section","goods",ge.wrapperMain),ge.regulationContainer=M("div","regulation-container",ge.sectionGoods),ge.cardsContainer=M("div","cards-container",ge.sectionGoods);const he=ge,fe=class extends N{constructor(e,t){super(e)}render(){const e=document.createElement("div");return e.className="error",e.textContent="PAGE NOT FOUND (404)",this.container.append(e),this.container}};class ve{static renderNewPage(e,t){const n=document.querySelector(`#${ve.defaultPageId}`);n&&n.remove();let o=null;if(o="main-page"===e&&t?new he(e,t):"main-page"===e?new he(e):"product-details"===e.split("/")[0]?new O(e):"cart"===e?new A(e):new fe(e,404),o){const e=o.render();e.id=ve.defaultPageId,ve.container.append(e)}}enableRouteChange(){window.addEventListener("hashchange",(()=>{const e=window.location.href;if("main-page"!==window.location.hash.slice(1).split("?")[0]){const e=window.location.hash.slice(1).split("?")[0];ve.renderNewPage(e)}else{const t="main-page";ve.renderNewPage(t,e)}}))}constructor(){this.header=new E("header","header")}run(){ve.container.append(this.header.render());let e="";e=window.location.hash&&"main-page"!=window.location.hash.slice(1).split("?")[0]?"product-details"===window.location.hash.slice(1).split("/")[0]?"product-details":"cart"===window.location.hash.slice(1)?"cart":window.location.hash.slice(1):"main-page",ve.renderNewPage(e),this.enableRouteChange()}}ve.container=document.body,ve.defaultPageId="current-page",(new ve).run()})()})();